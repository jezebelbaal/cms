<div class="search">
  <div class="form-group">
    <button ng-click="postSearchCtrl.create()"
      class="btn btn-default btn-block create"
      ng-disabled="!postSearchCtrl.ready()">

      <span class="glyphicon glyphicon-play" ng-show="postSearchCtrl.ready()">
      </span>
      <strong ng-show="postSearchCtrl.ready()">
        Nova Notícia
      </strong>

      <span ng-hide="postSearchCtrl.ready()">
        <i class="fa fa-cog fa-spin" ></i>
      </span>
      <strong ng-hide="postSearchCtrl.ready()">
        Carregando informações adicionais, só um momento companheira!
      </strong>
    </button>
  </div>
  <div class="form-inline filters">
    <search-form class="form-group" filter="filter" ></search-form>
    <figure>
      <img src="{{ postSearchCtrl.organization.avatar_url }}" alt="{{ postSearchCtrl.organization.name || postSearchCtrl.organization.login }}">
      <figcaption>{{ postSearchCtrl.organization.name || postSearchCtrl.organization.login }}</figcaption>
    </figure>
  </div>

  <div class="result">
    <table  ng-if="postSearchCtrl.posts.length > 0" class="table table-striped">
      <thead>
        <tr>
          <th>Data/hora publicação</th>
          <th>Título notícia</th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        <tr data-ng-repeat="post in postSearchCtrl.posts | startFrom: (postSearchCtrl.currentPage - 1) * postSearchCtrl.maxSize | limitTo:postSearchCtrl.maxSize">
          <td>
            {{ post.metadata.date | date: 'dd/MM/yyyy HH:mm:ss'  }}
            <span ng-hide="post.metadata">
              <i class="glyphicon glyphicon-refresh spin" ></i>
            </span>
          </td>
          <td>
            {{ post.metadata.title }}
            <span ng-hide="post.metadata">
              <i class="glyphicon glyphicon-refresh spin" ></i>
            </span>
          </td>
          <td>
            <span ng-show="post.metadata">
              <span class="label label-default" ng-show="post.metadata.published === false" >Rascunho</span>
              <span class="label label-primary" ng-show="post.metadata.published === true" >Publicada</span>
            </span>
          </td>
          <td>
            <button ng-click="postSearchCtrl.edit(post)"
              class="btn btn-default"
              ng-disabled="!postSearchCtrl.ready()">
              <span class="glyphicon glyphicon-pencil"></span> Editar
            </button>
          </td>
        </tr>
      </tbody>
    </table>
    <pager
    total-items="postSearchCtrl.posts.length"
    items-per-page="postSearchCtrl.maxSize"
    ng-model="postSearchCtrl.currentPage"
    ng-change="postSearchCtrl.loadElements()"
    previous-text="<< Anterior"
    next-text="Próxima >>">
    </pager>
    <p>{{ postSearchCtrl.posts.length }} registro(s) encontrados companheira(o).</p>
  </div>
  <div ng-if="posts.length === 0" class="result">
    <p>Nenhuma postagem criada, companheira(o).</p>
  </div>
  <alert ng-repeat="alert in postSearchCtrl.alerts"
    type="{{alert.type}}"
    close="closeAlert($index)">
    {{alert.msg}}
  </alert>

</div>
